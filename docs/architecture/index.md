# LLM Server Monitoring System Fullstack Architecture Document

## Table of Contents

- [LLM Server Monitoring System Fullstack Architecture Document](#table-of-contents)
  - [Introduction](./introduction.md)
    - [Starter Template or Existing Project](./introduction.md#starter-template-or-existing-project)
    - [Change Log](./introduction.md#change-log)
  - [High Level Architecture](./high-level-architecture.md)
    - [Technical Summary](./high-level-architecture.md#technical-summary)
    - [Platform and Infrastructure Choice](./high-level-architecture.md#platform-and-infrastructure-choice)
    - [Repository Structure](./high-level-architecture.md#repository-structure)
    - [High Level Architecture Diagram](./high-level-architecture.md#high-level-architecture-diagram)
    - [Architectural Patterns](./high-level-architecture.md#architectural-patterns)
  - [Tech Stack](./tech-stack.md)
    - [Technology Stack Table](./tech-stack.md#technology-stack-table)
    - [AI-Driven E2E Testing Architecture](./tech-stack.md#ai-driven-e2e-testing-architecture)
  - [Data Models](./data-models.md)
    - [System Metrics](./data-models.md#system-metrics)
    - [GPU Metrics](./data-models.md#gpu-metrics)
    - [Container Metrics](./data-models.md#container-metrics)
    - [LLM Model Metrics](./data-models.md#llm-model-metrics)
  - [Mock Data Architecture (Phase 1)](./mock-data-architecture-phase-1.md)
    - [Mock Data Strategy](./mock-data-architecture-phase-1.md#mock-data-strategy)
    - [Mock Data Components](./mock-data-architecture-phase-1.md#mock-data-components)
      - [1. Mock Prometheus Exporters](./mock-data-architecture-phase-1.md#1-mock-prometheus-exporters)
      - [2. Mock System Metrics Generator](./mock-data-architecture-phase-1.md#2-mock-system-metrics-generator)
      - [3. Mock GPU Metrics Generator](./mock-data-architecture-phase-1.md#3-mock-gpu-metrics-generator)
      - [4. Mock LLM Metrics Generator](./mock-data-architecture-phase-1.md#4-mock-llm-metrics-generator)
      - [5. Mock Container Metrics Generator](./mock-data-architecture-phase-1.md#5-mock-container-metrics-generator)
    - [Mock Data Configuration](./mock-data-architecture-phase-1.md#mock-data-configuration)
    - [Mock Data Docker Compose](./mock-data-architecture-phase-1.md#mock-data-docker-compose)
    - [Benefits of Mock Data Architecture](./mock-data-architecture-phase-1.md#benefits-of-mock-data-architecture)
  - [API Specification](./api-specification.md)
    - [REST API Specification](./api-specification.md#rest-api-specification)
    - [Custom Exporter Implementation Pattern](./api-specification.md#custom-exporter-implementation-pattern)
    - [Prometheus Scrape Configuration](./api-specification.md#prometheus-scrape-configuration)
  - [Components](./components.md)
    - [Component List](./components.md#component-list)
      - [Prometheus Server](./components.md#prometheus-server)
      - [Grafana Server](./components.md#grafana-server)
      - [Loki Server](./components.md#loki-server)
      - [Node Metrics Exporter](./components.md#node-metrics-exporter)
      - [GPU Metrics Exporter](./components.md#gpu-metrics-exporter)
      - [Container Metrics Exporter](./components.md#container-metrics-exporter)
      - [LiteLLM Metrics Exporter](./components.md#litellm-metrics-exporter)
      - [vLLM Metrics Exporter](./components.md#vllm-metrics-exporter)
      - [LangFuse Metrics Exporter](./components.md#langfuse-metrics-exporter)
      - [Test Orchestration (Using Existing MCP Servers)](./components.md#test-orchestration-using-existing-mcp-servers)
      - [Mock Data Generator](./components.md#mock-data-generator)
    - [Component Interaction Diagram](./components.md#component-interaction-diagram)
    - [Component Deployment Strategy](./components.md#component-deployment-strategy)
    - [Component Health Monitoring](./components.md#component-health-monitoring)
  - [External APIs](./external-apis.md)
    - [LiteLLM Admin API](./external-apis.md#litellm-admin-api)
    - [vLLM Metrics API](./external-apis.md#vllm-metrics-api)
    - [Docker Engine API](./external-apis.md#docker-engine-api)
    - [LangFuse API](./external-apis.md#langfuse-api)
    - [NVIDIA Management Library (NVML)](./external-apis.md#nvidia-management-library-nvml)
    - [Hugging Face Model API](./external-apis.md#hugging-face-model-api)
    - [Claude API (Testing Only)](./external-apis.md#claude-api-testing-only)
  - [Core Workflows](./core-workflows.md)
    - [Metric Collection Workflow](./core-workflows.md#metric-collection-workflow)
    - [GPU Alert Workflow](./core-workflows.md#gpu-alert-workflow)
    - [vLLM Container Discovery Workflow](./core-workflows.md#vllm-container-discovery-workflow)
    - [Mock Data Scenario Change Workflow](./core-workflows.md#mock-data-scenario-change-workflow)
    - [AI-Driven Test Execution Workflow](./core-workflows.md#ai-driven-test-execution-workflow)
    - [Log Collection Workflow](./core-workflows.md#log-collection-workflow)
    - [Model Metadata Enrichment Workflow](./core-workflows.md#model-metadata-enrichment-workflow)
    - [Dashboard Auto-Discovery Workflow (for Testing)](./core-workflows.md#dashboard-auto-discovery-workflow-for-testing)
  - [Database Schema](./database-schema.md)
    - [Prometheus Time-Series Schema](./database-schema.md#prometheus-time-series-schema)
      - [Metric Naming Convention](./database-schema.md#metric-naming-convention)
      - [System Metrics Schema](./database-schema.md#system-metrics-schema)
      - [GPU Metrics Schema](./database-schema.md#gpu-metrics-schema)
      - [Container Metrics Schema](./database-schema.md#container-metrics-schema)
      - [LLM Model Metrics Schema](./database-schema.md#llm-model-metrics-schema)
      - [vLLM-Specific Metrics Schema](./database-schema.md#vllm-specific-metrics-schema)
    - [Loki Log Schema](./database-schema.md#loki-log-schema)
      - [Log Stream Labels](./database-schema.md#log-stream-labels)
      - [Log Line Format](./database-schema.md#log-line-format)
    - [Grafana Configuration Storage](./database-schema.md#grafana-configuration-storage)
      - [Dashboard Storage Structure](./database-schema.md#dashboard-storage-structure)
    - [Mock Data SQLite Schema (Phase 1)](./database-schema.md#mock-data-sqlite-schema-phase-1)
    - [Data Retention Policies](./database-schema.md#data-retention-policies)
    - [Query Examples](./database-schema.md#query-examples)
      - [Prometheus Queries (PromQL)](./database-schema.md#prometheus-queries-promql)
      - [Loki Queries (LogQL)](./database-schema.md#loki-queries-logql)
  - [Frontend Architecture](./frontend-architecture.md)
    - [Component Architecture](./frontend-architecture.md#component-architecture)
      - [Dashboard Organization](./frontend-architecture.md#dashboard-organization)
      - [Panel Types and Templates](./frontend-architecture.md#panel-types-and-templates)
    - [State Management Architecture](./frontend-architecture.md#state-management-architecture)
      - [Dashboard Variables](./frontend-architecture.md#dashboard-variables)
      - [Panel Interactions](./frontend-architecture.md#panel-interactions)
    - [Routing Architecture](./frontend-architecture.md#routing-architecture)
      - [URL Structure](./frontend-architecture.md#url-structure)
      - [Dashboard Navigation](./frontend-architecture.md#dashboard-navigation)
    - [Frontend Services Layer](./frontend-architecture.md#frontend-services-layer)
      - [Data Source Configuration](./frontend-architecture.md#data-source-configuration)
      - [Custom Panel Plugins](./frontend-architecture.md#custom-panel-plugins)
    - [Dashboard Templates](./frontend-architecture.md#dashboard-templates)
      - [Server Health Dashboard](./frontend-architecture.md#server-health-dashboard)
      - [GPU Dashboard Template](./frontend-architecture.md#gpu-dashboard-template)
    - [Alert Visualization](./frontend-architecture.md#alert-visualization)
    - [Theme and Styling](./frontend-architecture.md#theme-and-styling)
  - [Backend Architecture](./backend-architecture.md)
    - [Service Architecture](./backend-architecture.md#service-architecture)
      - [Exporter Service Organization](./backend-architecture.md#exporter-service-organization)
      - [Base Exporter Template](./backend-architecture.md#base-exporter-template)
      - [Container Exporter Implementation](./backend-architecture.md#container-exporter-implementation)
    - [Database Architecture](./backend-architecture.md#database-architecture)
      - [Prometheus Configuration](./backend-architecture.md#prometheus-configuration)
      - [Data Access Layer](./backend-architecture.md#data-access-layer)
    - [Authentication and Authorization](./backend-architecture.md#authentication-and-authorization)
      - [Auth Configuration](./backend-architecture.md#auth-configuration)
      - [Auth Middleware](./backend-architecture.md#auth-middleware)
  - [Unified Project Structure](./unified-project-structure.md)
  - [Development Workflow](./development-workflow.md)
    - [Local Development Setup](./development-workflow.md#local-development-setup)
      - [Prerequisites](./development-workflow.md#prerequisites)
      - [Initial Setup](./development-workflow.md#initial-setup)
      - [Development Commands](./development-workflow.md#development-commands)
    - [Environment Configuration](./development-workflow.md#environment-configuration)
      - [Required Environment Variables](./development-workflow.md#required-environment-variables)
    - [Makefile Commands](./development-workflow.md#makefile-commands)
  - [Deployment Architecture](./deployment-architecture.md)
    - [Deployment Strategy](./deployment-architecture.md#deployment-strategy)
    - [CI/CD Pipeline](./deployment-architecture.md#cicd-pipeline)
    - [Environments](./deployment-architecture.md#environments)
    - [Systemd Service](./deployment-architecture.md#systemd-service)
    - [Deployment Script](./deployment-architecture.md#deployment-script)
  - [Security and Performance](./security-and-performance.md)
    - [Security Requirements](./security-and-performance.md#security-requirements)
    - [Performance Optimization](./security-and-performance.md#performance-optimization)
    - [Security Hardening](./security-and-performance.md#security-hardening)
    - [Performance Tuning](./security-and-performance.md#performance-tuning)
  - [Testing Strategy](./testing-strategy.md)
    - [Testing Pyramid](./testing-strategy.md#testing-pyramid)
    - [Test Organization](./testing-strategy.md#test-organization)
      - [Frontend Tests (Dashboard Tests)](./testing-strategy.md#frontend-tests-dashboard-tests)
      - [Backend Tests (Exporter Tests)](./testing-strategy.md#backend-tests-exporter-tests)
      - [E2E Tests with MCP](./testing-strategy.md#e2e-tests-with-mcp)
    - [Test Examples](./testing-strategy.md#test-examples)
      - [Mock Data Generator Test](./testing-strategy.md#mock-data-generator-test)
      - [Integration Test](./testing-strategy.md#integration-test)
  - [Coding Standards](./coding-standards.md)
    - [Critical Monitoring System Rules](./coding-standards.md#critical-monitoring-system-rules)
    - [Naming Conventions](./coding-standards.md#naming-conventions)
    - [Code Patterns](./coding-standards.md#code-patterns)
  - [Error Handling Strategy](./error-handling-strategy.md)
    - [Error Flow](./error-handling-strategy.md#error-flow)
    - [Error Response Format](./error-handling-strategy.md#error-response-format)
    - [Frontend Error Handling](./error-handling-strategy.md#frontend-error-handling)
    - [Backend Error Handling](./error-handling-strategy.md#backend-error-handling)
  - [Monitoring and Observability](./monitoring-and-observability.md)
    - [Monitoring Stack](./monitoring-and-observability.md#monitoring-stack)
    - [Key Metrics](./monitoring-and-observability.md#key-metrics)
    - [Self-Monitoring Dashboard](./monitoring-and-observability.md#self-monitoring-dashboard)
  - [Checklist Results Report](./checklist-results-report.md)
    - [Architecture Completeness Checklist](./checklist-results-report.md#architecture-completeness-checklist)
    - [Ready for Implementation](./checklist-results-report.md#ready-for-implementation)
